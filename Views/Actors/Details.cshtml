@model Fall2025_Project3_gbward.ViewModels.ActorDetailsViewModel

@{
ViewData["Title"] = "Actor Details";
}

<h1>@Model.Actor.Name</h1>

<div class="row">
	<div class="col-md-8">
		<h4>Actor Information</h4>
		<hr />
		<dl class="row">
			<dt class="col-sm-3">Name</dt>
			<dd class="col-sm-9">@Model.Actor.Name</dd>

			<dt class="col-sm-3">Gender</dt>
			<dd class="col-sm-9">@(Model.Actor.Gender ?? "N/A")</dd>

			<dt class="col-sm-3">Age</dt>
			<dd class="col-sm-9">@(Model.Actor.Age?.ToString() ?? "N/A")</dd>

			<dt class="col-sm-3">IMDB Link</dt>
			<dd class="col-sm-9">
				@if (!string.IsNullOrEmpty(Model.Actor.ImdbLink))
				{
				<a href="@Model.Actor.ImdbLink" target="_blank">View on IMDB</a>
				}
				else
				{
				<span>N/A</span>
				}
			</dd>
		</dl>

		@if (Model.Actor.Photo != null && Model.Actor.Photo.Length > 0)
		{
		<div class="mb-3">
			<strong>Photo:</strong><br />
			<img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Actor.Photo)" alt="Actor Photo"
				style="max-width: 300px; max-height: 400px;" class="img-thumbnail" />
		</div>
		}

		<h4 class="mt-4">Movies</h4>
		@if (Model.Actor.ActorMovies != null && Model.Actor.ActorMovies.Any())
		{
		<ul>
			@foreach (var ma in Model.Actor.ActorMovies)
			{
			<li>
				<a asp-controller="Movies" asp-action="Details" asp-route-id="@ma.Movie.Id">
					@ma.Movie.Title
				</a>
				@if (!string.IsNullOrEmpty(ma.Movie.Year))
				{
				<span>(@ma.Movie.Year)</span>
				}
			</li>
			}
		</ul>
		}
		else
		{
		<p>No movies listed for this actor.</p>
		}
	</div>
</div>

<div class="row mt-4">
	<div class="col-md-12">
		<h3>AI-Generated Tweets and Sentiment Analysis</h3>
		<h5>Overall Sentiment: <span class="badge @(Model.SentimentLabel == " Positive" ? "bg-success" :
				Model.SentimentLabel=="Negative" ? "bg-danger" : "bg-secondary" )">
				@Model.SentimentLabel (@Model.AverageSentiment.ToString("F3"))
			</span></h5>
		<hr />

		@if (Model.Tweets != null && Model.Tweets.Any())
		{
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th style="width: 70%">Tweet</th>
					<th style="width: 30%">Sentiment</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var tweet in Model.Tweets)
				{
				<tr>
					<td>@tweet.Tweet</td>
					<td>
						<span class="badge @(tweet.SentimentLabel == " Positive" ? "bg-success"
							: tweet.SentimentLabel=="Negative" ? "bg-danger"
							: "bg-secondary" )">
							@tweet.SentimentLabel (@tweet.CompoundScore.ToString("F3"))
						</span>
					</td>
				</tr>
				}
			</tbody>
		</table>
		}
		else
		{
		<p>No tweets available.</p>
		}
	</div>
</div>

<div class="mt-3">
	<a asp-action="Edit" asp-route-id="@Model.Actor.Id" class="btn btn-primary">Edit</a>
	<a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>
